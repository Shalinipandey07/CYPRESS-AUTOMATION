/// <reference types="cypress" />
describe('Add Test Run functionality', function() {
   /* function userID_Alpha() {
      var text = "";
      var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
      for (var i = 0; i < 5; i++)
        text += possible.charAt(Math.floor(Math.random() * possible.length));
      return text;
    }*/
      beforeEach(function(){
          cy.Validcredentials('shalini03@yopmail.com','12345678')
          cy.log('User is logged in Successfully.')
      })
     // before(function(){
        //cy.Validcredentials('apoorvowner@yopmail.com','testbox123')
        //cy.log('User is logged in Successfully.')
        it('Add test run', ()=>{
        cy.wait(2000)
        cy.get(':nth-child(6) > .max-w-0 > .flex > .truncate > span').click()       
       // cy.get('button:contains(New Project)').click()
       cy.get('.-mb-px > :nth-child(5)').click()
       cy.get('#new-test-run').click()
       cy.get(':nth-child(2) > .mt-1 > .appearance-none').type('Test3')
       cy.get(':nth-child(3) > .mt-1 > .appearance-none').click()
        cy.contains('Rakesh Suyal').click()
        cy.get('[name=description]').type('This is third test run')
        cy.get('#add-test-run').click()
        cy.wait(1000)
       cy.get('#new-test-run').click()
       cy.get(':nth-child(2) > .mt-1 > .appearance-none').type('Test4')
       cy.get(':nth-child(3) > .mt-1 > .appearance-none').click()
        cy.contains('Rakesh Suyal').click()
        cy.get('[name=description]').type('This is fourth test run')
        cy.get('#includeSpecific').click()
        cy.get('.hover\:underline').click()
        cy.get('#sectionList > :nth-child(2) > .h-4').click()
        cy.get('#sectionList > :nth-child(3) > .h-4').click()
        cy.get('#buttons > .justify-center').click()
      //  cy.get('[name=name]').type('NEW'/*userID_Alpha()*/)
        //cy.get('[name=description]').type('This is the Automation Description of the project')
       // cy.get('[type=submit]').should('be.visible').should('be.enabled').click()
        //cy.wait(2000)
        //cy.get('tr:nth-child(1) > td.pr-6 > div').click()
        //cy.get('.py-1').contains('View').click()
       // cy.url().should('include','projects/')
        /*cy.get('button:contains(New Test Case)').click()
        cy.get('[name=title]').clear().type('Verify the Element is clickable'+userID_Alpha())
        cy.get('[name=preconditions]').type('QA Site should be up and running')
        cy.get('[name=steps]').type('Go to QA Link and Enter the credentials')
        cy.get('[name=expectedresult]').type('User should be enter the credentials')
        cy.get('[type=submit]').should('be.visible').should('be.enabled').click()
        cy.wait(2000)
        cy.get('button:contains(New Test Case)').click()
        cy.get('[name=title]').clear().type('Verify the Element is clickable'+userID_Alpha())
        cy.get('[name=preconditions]').type('QA Site should be up and running')
        cy.get('[name=steps]').type('Go to QA Link and Enter the credentials')
        cy.get('[name=expectedresult]').type('User should be enter the credentials')
        cy.get('[type=submit]').should('be.visible').should('be.enabled').click()
        cy.wait(2000)
        cy.get('button:contains(New Test Case)').click()
        cy.get('[name=title]').clear().type('Verify the Element is clickable'+userID_Alpha())
        cy.get('[name=preconditions]').type('QA Site should be up and running')
        cy.get('[name=steps]').type('Go to QA Link and Enter the credentials')
        cy.get('[name=expectedresult]').type('User should be enter the credentials')
        cy.get('[type=submit]').should('be.visible').should('be.enabled').click()
        cy.wait(2000)
        cy.get('button:contains(New Test Case)').click()
        cy.get('[name=title]').clear().type('Verify the Element is clickable'+userID_Alpha())
        cy.get('[name=preconditions]').type('QA Site should be up and running')
        cy.get('[name=steps]').type('Go to QA Link and Enter the credentials')
        cy.get('[name=expectedresult]').type('User should be enter the credentials')
        cy.get('[type=submit]').should('be.visible').should('be.enabled').click()
        cy.wait(2000)
        cy.get('button:contains(New Test Case)').click()
        cy.get('[name=title]').clear().type('Verify the Element is clickable'+userID_Alpha())
        cy.get('[name=preconditions]').type('QA Site should be up and running')
        cy.get('[name=steps]').type('Go to QA Link and Enter the credentials')
        cy.get('[name=expectedresult]').type('User should be enter the credentials')
        cy.get('[type=submit]').should('be.visible').should('be.enabled').click()*/
    })
      it.skip('Verify to create a test Run', () => {
        cy.wait(2000)       
        cy.get(':nth-child(6) > .max-w-0 > .flex > .truncate > span').click()       
        cy.get('.-mb-px > :nth-child(5)').click()
        //cy.get('button:contains(New Test Run)').should('be.visible').should('be.enabled').click()
        cy.get('[label=Name]').clear().type('TestRun'+userID_Alpha())
        cy.get('[name=description]').clear().type('TestRun Description')
        cy.get('[type=submit]').should('be.visible').should('be.enabled').click()
        cy.wait(2000)
        cy.go('back')
        cy.go('back')
        cy.get('tr:nth-child(1) > td.px-6.py-4.text-right.text-sm').contains('pending')
          cy.log('.........Test Run created successfully.....')
      })
      it('Verify to Complete a test Run', () => {
        cy.get(':nth-child(6) > .max-w-0 > .flex > .truncate > span').click()       
        cy.get('.-mb-px > :nth-child(5)').click()
        cy.wait(2000)       
        cy.get('tr:nth-child(1) > td.pr-6 > div').click()
        cy.get('.py-1').contains('View').click()
        cy.url().should('include','projects/')
        cy.get('a:contains(Test Runs)').click()
        cy.get('button:contains(New Test Run)').should('be.visible').should('be.enabled').click()
        cy.get('[label=Name]').clear().type('TestRun_Complete'+userID_Alpha())
        cy.get('[name=description]').clear().type('TestRun Description')
        cy.get('[type=submit]').should('be.visible').should('be.enabled').click()
        cy.get('tr:nth-child(1) > td.pr-6 > div').click()
        cy.get('[role=menuitem]').contains('Passed').click()
        cy.get('button:contains(Skip)').click()
        cy.get('tr:nth-child(2) > td.pr-6 > div').click()
        cy.get('[role=menuitem]').contains('Passed').click()
        cy.get('button:contains(Skip)').click()
        cy.get('tr:nth-child(3) > td.pr-6 > div').click()
        cy.get('[role=menuitem]').contains('Passed').click()
        cy.get('button:contains(Skip)').click()
        cy.get('tr:nth-child(4) > td.pr-6 > div').click()
        cy.get('[role=menuitem]').contains('Failed').click()
        cy.get('button:contains(Skip)').click()
        cy.get('tr:nth-child(5) > td.pr-6 > div').click()
        cy.get('[role=menuitem]').contains('Failed').click()
        cy.get('button:contains(Skip)').click()
        cy.go('back')
        cy.go('back')
        cy.get('tr:nth-child(1) > td.px-6.py-4.text-right.text-sm').contains('completed')
          cy.wait(2000)
          cy.log('.........Test Run created successfully.....')
      })
      it('TO verify that Test run is InProgress Status', () => {
        cy.wait(2000)       
        cy.get('tr:nth-child(1) > td.pr-6 > div').click()
        cy.get('.py-1').contains('View').click()
        cy.url().should('include','projects/')
        cy.get('a:contains(Test Runs)').click()
        cy.get('button:contains(New Test Run)').should('be.visible').should('be.enabled').click()
        cy.get('[label=Name]').clear().type('TestRun_INProgress'+userID_Alpha())
        cy.get('[name=description]').clear().type('TestRun Description')
        cy.get('[type=submit]').should('be.visible').should('be.enabled').click()
        cy.get('tr:nth-child(1) > td.pr-6 > div').click()
        cy.get('[role=menuitem]').contains('Passed').click()
        cy.get('button:contains(Skip)').click()
        cy.get('tr:nth-child(2) > td.pr-6 > div').click()
        cy.get('[role=menuitem]').contains('Passed').click()
        cy.get('button:contains(Skip)').click()
        cy.get('tr:nth-child(3) > td.pr-6 > div').click()
        cy.get('[role=menuitem]').contains('Passed').click()
        cy.get('button:contains(Skip)').click()
        cy.get('tr:nth-child(4) > td.pr-6 > div').click()
        cy.get('[role=menuitem]').contains('Failed').click()
        cy.get('button:contains(Skip)').click()
        cy.go('back')
        cy.go('back')
        cy.get('tr:nth-child(1) > td.px-6.py-4.text-right.text-sm').contains('In Progress')
          cy.wait(2000)
          cy.log('.........Test Run created successfully.....')
      })
      it('Verify to Edit a Test Run', () => {
        cy.wait(2000)       
        cy.get('tr:nth-child(1) > td.pr-6 > div').click()
        cy.get('.py-1').contains('View').click()
        cy.url().should('include','projects/')
        cy.get('a:contains(Test Runs)').click()
        cy.get('tr:nth-child(1) > td.px-6.py-4> div > .h-4.mr-3').click()
        cy.get('[label=Name]').clear().type('EditTestRun'+userID_Alpha())
        cy.get('[name=description]').clear().type('TestRun Description')
        cy.get('[type=submit]').should('be.visible').should('be.enabled').click()
          cy.wait(2000)
          cy.log('.........Test Run edited successfully.....')
      })
      it('TO verify view a Test Run', () => {
        cy.wait(2000)       
        cy.get('tr:nth-child(1) > td.pr-6 > div').click()
        cy.get('.py-1').contains('View').click()
        cy.url().should('include','projects/')
        cy.get('a:contains(Test Runs)').click()
        cy.get('tr:nth-child(1) > td.px-6.py-4 > a').click()
          cy.wait(2000)
          cy.log('.........View test run successfully.....')
      })
      it('TO verify Delete a Test Run', () => {
        cy.wait(2000)       
        cy.get('tr:nth-child(1) > td.pr-6 > div').click()
        cy.get('.py-1').contains('View').click()
        cy.url().should('include','projects/')
        cy.get('a:contains(Test Runs)').click()
        cy.get('tr:nth-child(1) > td.px-6.py-4> div > .h-4.w-4.mr-1').click()
        cy.get('button:contains(Delete)').click()
          cy.log('.........Test Run Deleted successfully.....')
      })
})